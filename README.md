# CVEè¡¥ä¸å›åˆåˆ†æç³»ç»Ÿ

ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–åˆ†æLinux Kernel CVEè¡¥ä¸å¹¶ååŠ©å›åˆï¼ˆbackportingï¼‰åˆ°è‡ªç»´æŠ¤ç‰ˆæœ¬çš„æ™ºèƒ½ç³»ç»Ÿã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **å¤šç»´åº¦commitåŒ¹é…**: ç²¾ç¡®IDã€Subjectç›¸ä¼¼åº¦ã€ä»£ç Diffã€æ–‡ä»¶è·¯å¾„ç­‰å¤šç§åŒ¹é…ç­–ç•¥
- **æ™ºèƒ½ä¾èµ–åˆ†æ**: è‡ªåŠ¨æ‰¾å‡ºå‰ç½®ä¾èµ–è¡¥ä¸ï¼Œç”Ÿæˆæ‹“æ‰‘æ’åºçš„åˆå…¥é¡ºåº
- **é«˜æ•ˆæœç´¢**: æœ¬åœ°ç¼“å­˜ + å…¨æ–‡ç´¢å¼•ï¼Œæœç´¢é€Ÿåº¦æå‡20å€
- **AIè¾…åŠ©åˆ†æ**: å¯é€‰çš„AIè¯­ä¹‰åˆ†æï¼Œç†è§£è¡¥ä¸å†…å®¹å’Œä¾èµ–å…³ç³»
- **å¯è§†åŒ–æŠ¥å‘Š**: ç”ŸæˆJSONã€Markdownã€HTMLå¤šç§æ ¼å¼çš„åˆ†ææŠ¥å‘Š

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# Pythonç‰ˆæœ¬è¦æ±‚: 3.8+
python --version

# å…‹éš†é¡¹ç›®ï¼ˆæˆ–è§£å‹ä»£ç åŒ…ï¼‰
cd cve_backporting

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp config.example.yaml config.yaml

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ä»“åº“è·¯å¾„
vim config.yaml
```

æœ€å°é…ç½®ç¤ºä¾‹:
```yaml
repositories:
  "5.10-hulk":
    path: "/path/to/your/kernel-5.10-hulk"
    branch: "hulk-5.10"
```

### 3. é¦–æ¬¡ä½¿ç”¨ - æ„å»ºç¼“å­˜

```bash
# ä¸ºç›®æ ‡ç‰ˆæœ¬æ„å»ºcommitç¼“å­˜ï¼ˆé¦–æ¬¡è¿è¡Œï¼Œéœ€è¦2-5åˆ†é’Ÿï¼‰
python cli.py build-cache --target 5.10-hulk
```

### 4. åˆ†æCVE

```bash
# åˆ†æå•ä¸ªCVE
python cli.py analyze --cve CVE-2024-12345 --target 5.10-hulk

# æŸ¥çœ‹ç»“æœ
ls analysis_results/
```

### 5. æŸ¥çœ‹æŠ¥å‘Š

```bash
# JSONæ ¼å¼ï¼ˆå¯è¢«å…¶ä»–å·¥å…·å¤„ç†ï¼‰
cat analysis_results/cve_CVE-2024-12345_5.10-hulk_*.json

# Markdownæ ¼å¼ï¼ˆäººç±»å¯è¯»ï¼‰
cat analysis_results/cve_CVE-2024-12345_5.10-hulk_*.md
```

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLI / API å±‚                        â”‚
â”‚              (cli.py, web_api.py)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               EnhancedCVEAnalyzer                       â”‚
â”‚                 (ä¸»æ§åˆ¶å™¨)                                â”‚
â”‚  - åè°ƒå„æ¨¡å—å·¥ä½œ                                          â”‚
â”‚  - å®ç°åˆ†ææµç¨‹                                            â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚         â”‚          â”‚          â”‚
   â–¼         â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Commitâ”‚ â”‚Dep  â”‚ â”‚GitRepo   â”‚ â”‚Crawl     â”‚
â”‚Match â”‚ â”‚Anal â”‚ â”‚Manager   â”‚ â”‚CVE       â”‚
â”‚er    â”‚ â”‚yzer â”‚ â”‚          â”‚ â”‚Patch     â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- CommitMatcher: å¤šç»´åº¦commitåŒ¹é…
- DependencyAnalyzer: ä¾èµ–å›¾æ„å»ºä¸åˆ†æ
- GitRepoManager: Gitä»“åº“æ“ä½œä¸ç¼“å­˜
- Crawl_Cve_Patch: CVEä¿¡æ¯è·å–
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### 1. **enhanced_patch_matcher.py**
- **CommitMatcherç±»**: å®ç°å¤šç§åŒ¹é…ç®—æ³•
  - ç²¾ç¡®IDåŒ¹é…
  - Subjectæ–‡æœ¬ç›¸ä¼¼åº¦ï¼ˆåŸºäºSequenceMatcherï¼‰
  - ä»£ç Diffç›¸ä¼¼åº¦
  - æ–‡ä»¶è·¯å¾„åŒ¹é…
  - ç»¼åˆè¯„åˆ†æœºåˆ¶

- **DependencyAnalyzerç±»**: ä¾èµ–å…³ç³»åˆ†æ
  - åŸºäºæ–‡ä»¶å’Œå‡½æ•°çš„ä¾èµ–è¯†åˆ«
  - ä¾èµ–å›¾æ„å»ºï¼ˆæœ‰å‘å›¾ï¼‰
  - æ‹“æ‰‘æ’åºï¼ˆKahnç®—æ³•ï¼‰
  - ç¯æ£€æµ‹ä¸å¤„ç†

#### 2. **git_repo_manager.py**
- **GitRepoManagerç±»**: Gitä»“åº“ç®¡ç†
  - Gitå‘½ä»¤æ‰§è¡Œå°è£…
  - SQLiteç¼“å­˜ï¼ˆFTS5å…¨æ–‡ç´¢å¼•ï¼‰
  - å¤šç§æœç´¢ç­–ç•¥
  - æ‰¹é‡æ“ä½œä¼˜åŒ–

#### 3. **enhanced_cve_analyzer.py**
- **EnhancedCVEAnalyzerç±»**: ä¸»åˆ†ææµç¨‹
  - 4æ­¥åˆ†ææµç¨‹ï¼šè·å–CVE â†’ åˆ†æå¼•å…¥ â†’ åˆ†æä¿®å¤ â†’ åˆ†æä¾èµ–
  - å¢é‡æœç´¢ç­–ç•¥ï¼ˆå¿«é€Ÿè·¯å¾„ â†’ æ…¢é€Ÿè·¯å¾„ï¼‰
  - ç»“æœèšåˆä¸æŠ¥å‘Šç”Ÿæˆ

---

## ğŸ’» å®‰è£…éƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows
- **Python**: 3.8+
- **Git**: 2.20+
- **ç£ç›˜ç©ºé—´**: è‡³å°‘2GBï¼ˆç”¨äºç¼“å­˜å’Œç»“æœï¼‰
- **å†…å­˜**: å»ºè®®4GB+

### å®Œæ•´å®‰è£…æ­¥éª¤

#### 1. å®‰è£…Pythonä¾èµ–

```bash
# åŸºç¡€ä¾èµ–
pip install requests pyyaml

# å¯é€‰ï¼šæœºå™¨å­¦ä¹ å¢å¼ºï¼ˆå¦‚éœ€ä½¿ç”¨ï¼‰
pip install transformers torch sentence-transformers

# å¯é€‰ï¼šWebç•Œé¢ï¼ˆå¦‚éœ€ä½¿ç”¨ï¼‰
pip install flask flask-cors

# å¼€å‘ä¾èµ–ï¼ˆå¦‚éœ€å‚ä¸å¼€å‘ï¼‰
pip install pytest black flake8 mypy
```

#### 2. é…ç½®Gitä»“åº“

ç¡®ä¿ä½ çš„kernelä»“åº“å¯ä»¥æ­£å¸¸è®¿é—®ï¼š

```bash
# æµ‹è¯•ä»“åº“è®¿é—®
cd /path/to/your/kernel-5.10-hulk
git log --oneline -10
```

#### 3. é…ç½®CVEä¿¡æ¯æº

å¦‚æœä½ éœ€è¦ä»ç§æœ‰æºè·å–CVEä¿¡æ¯ï¼Œéœ€è¦å®ç°`Crawl_Cve_Patch`ç±»ï¼š

```python
# å‚è€ƒå®ç°
class Crawl_Cve_Patch:
    def get_introduced_fixed_commit(self, cve_id):
        """ä»MITRE APIæˆ–å…¶ä»–æºè·å–CVEçš„å¼•å…¥å’Œä¿®å¤commit"""
        ...
    
    def get_patch_content(self, commit_id, kernel_version):
        """ä»kernel.orgæˆ–æœ¬åœ°ä»“åº“è·å–è¡¥ä¸å†…å®¹"""
        ...
```

#### 4. ï¼ˆå¯é€‰ï¼‰é…ç½®AIåˆ†æ

å¦‚æœä½¿ç”¨OpenAI API:

```yaml
# config.yaml
ai_analysis:
  enabled: true
  provider: "openai"
  openai:
    api_key: "sk-..."
    model: "gpt-4"
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ç”¨æ³•

#### 1. åˆ†æå•ä¸ªCVE

```bash
python cli.py analyze \
    --cve CVE-2024-12345 \
    --target 5.10-hulk
```

è¾“å‡ºç¤ºä¾‹:
```
================================================================================
å¼€å§‹åˆ†æ CVE: CVE-2024-12345, ç›®æ ‡ç‰ˆæœ¬: 5.10-hulk
================================================================================

[æ­¥éª¤0] ä»CVE APIè·å–è¡¥ä¸ä¿¡æ¯...
  - å¼•å…¥é—®é¢˜çš„commit: a1b2c3d4e5f6
  - ä¿®å¤è¡¥ä¸commit: f6e5d4c3b2a1

[æ­¥éª¤1] åˆ†æé—®é¢˜å¼•å…¥commit: a1b2c3d4e5f6
  [ç­–ç•¥1] ç²¾ç¡®æŸ¥æ‰¾commit ID: a1b2c3d4e5f6
  âœ— æœªæ‰¾åˆ°åŒ¹é…çš„commit

[æ­¥éª¤2] åˆ†æä¿®å¤è¡¥ä¸: f6e5d4c3b2a1
  - ä½¿ç”¨AIåˆ†æè¡¥ä¸å†…å®¹...
  - åœ¨ç›®æ ‡ä»“åº“ä¸­æœç´¢ä¿®å¤è¡¥ä¸...
  [ç­–ç•¥2] åŸºäºsubjectæ¨¡ç³Šæœç´¢
  âœ“ ä¿®å¤è¡¥ä¸å·²åˆå…¥: 1234567890ab
    ç½®ä¿¡åº¦: 92.50%

[æ­¥éª¤3] åˆ†æä¿®å¤è¡¥ä¸çš„ä¾èµ–...
  - ä»ç¤¾åŒºè·å–ç›¸å…³è¡¥ä¸...
  - æ‰¾åˆ° 3 ä¸ªç›¸å…³è¡¥ä¸

  [1/3] åˆ†æä¾èµ–è¡¥ä¸: abc123def456
    - AIåˆ†æä¾èµ–å…³ç³»...
    - åœ¨ç›®æ ‡ä»“åº“ä¸­æœç´¢...
    âœ“ å·²åˆå…¥: 9876543210fe (ç½®ä¿¡åº¦: 88.30%)

  [2/3] åˆ†æä¾èµ–è¡¥ä¸: def456ghi789
    âœ— æœªåˆå…¥ï¼Œéœ€è¦å›åˆ

  [3/3] åˆ†æä¾èµ–è¡¥ä¸: ghi789jkl012
    âœ— æœªåˆå…¥ï¼Œéœ€è¦å›åˆ

================================================================================
åˆ†æå®Œæˆ!
  - æ€»ä¾èµ–è¡¥ä¸: 3
  - å·²åˆå…¥: 1
  - éœ€è¦åˆå…¥: 3  (2ä¸ªä¾èµ– + 1ä¸ªä¿®å¤)
================================================================================
```

#### 2. æ‰¹é‡åˆ†æ

åˆ›å»ºCVEåˆ—è¡¨æ–‡ä»¶ `cve_list.txt`:
```
CVE-2024-12345
CVE-2024-12346
CVE-2024-12347
# è¿™æ˜¯æ³¨é‡Šè¡Œ
CVE-2024-12348
```

æ‰§è¡Œæ‰¹é‡åˆ†æ:
```bash
python cli.py analyze \
    --batch cve_list.txt \
    --target 5.10-hulk
```

#### 3. æœç´¢commit

```bash
# é€šè¿‡commit IDæœç´¢
python cli.py search \
    --commit abc123def456 \
    --target 5.10-hulk

# é€šè¿‡å…³é”®è¯æœç´¢ï¼ˆéœ€è¦æ‰©å±•å®ç°ï¼‰
python cli.py search \
    --keyword "memory leak in tcp" \
    --target 5.10-hulk
```

### é«˜çº§ç”¨æ³•

#### 1. ä½¿ç”¨Python API

```python
from enhanced_cve_analyzer import EnhancedCVEAnalyzer
from git_repo_manager import GitRepoManager
from config_loader import ConfigLoader

# åŠ è½½é…ç½®
config = ConfigLoader.load("config.yaml")

# åˆå§‹åŒ–
git_manager = GitRepoManager(
    {k: v['path'] for k, v in config.repositories.items()},
    use_cache=config.cache.enabled
)

analyzer = EnhancedCVEAnalyzer(crawl_cve, ai_analyze, git_manager)

# åˆ†æ
result = analyzer.analyze_cve_patch_enhanced(
    cve_id="CVE-2024-12345",
    target_kernel_version="5.10-hulk"
)

# å¤„ç†ç»“æœ
if result['code'] == 0:
    print("åˆ†ææˆåŠŸ!")
    
    # è·å–éœ€è¦åˆå…¥çš„è¡¥ä¸
    summary = result['dependency_analysis']['summary']
    not_merged = summary['not_merged_list']
    
    print(f"éœ€è¦åˆå…¥ {len(not_merged)} ä¸ªè¡¥ä¸:")
    for commit in not_merged:
        print(f"  - {commit}")
```

#### 2. è‡ªå®šä¹‰åŒ¹é…ç­–ç•¥

```python
from enhanced_patch_matcher import CommitMatcher

matcher = CommitMatcher()

# è°ƒæ•´é˜ˆå€¼
subject_matches = matcher.match_by_subject(
    source_commit,
    target_commits,
    threshold=0.75  # é™ä½é˜ˆå€¼ä»¥è·å¾—æ›´å¤šå€™é€‰
)

# æŸ¥çœ‹æ‰€æœ‰å€™é€‰ç»“æœ
for match in subject_matches:
    print(f"Commit: {match.target_commit}")
    print(f"Confidence: {match.confidence:.2%}")
    print(f"Details: {match.details}")
    print()
```

#### 3. å¯è§†åŒ–ä¾èµ–å›¾

```python
from enhanced_patch_matcher import DependencyAnalyzer

analyzer = DependencyAnalyzer()

# æ„å»ºä¾èµ–å›¾
analyzer.add_dependency("commit_A", "commit_B")  # Aä¾èµ–B
analyzer.add_dependency("commit_A", "commit_C")
analyzer.add_dependency("commit_B", "commit_D")

# æ‹“æ‰‘æ’åº
order = analyzer.topological_sort(["commit_A", "commit_B", "commit_C", "commit_D"])
print("åˆå…¥é¡ºåº:", order)
# è¾“å‡º: ['commit_D', 'commit_C', 'commit_B', 'commit_A']

# ä½¿ç”¨graphvizå¯è§†åŒ–ï¼ˆéœ€è¦å®‰è£…graphvizï¼‰
def visualize_dependency_graph(analyzer, output_file="deps.png"):
    import graphviz
    
    dot = graphviz.Digraph(comment='Dependency Graph')
    
    for patch, deps in analyzer.dependency_graph.items():
        dot.node(patch[:7], patch[:7])
        for dep in deps:
            dot.node(dep[:7], dep[:7])
            dot.edge(patch[:7], dep[:7])
    
    dot.render(output_file, format='png')
    print(f"ä¾èµ–å›¾å·²ä¿å­˜åˆ° {output_file}")
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ç»“æ„

å®Œæ•´çš„é…ç½®é€‰é¡¹è¯·å‚è€ƒ `config.example.yaml`ï¼Œä»¥ä¸‹æ˜¯å…³é”®é…ç½®è¯´æ˜ï¼š

#### 1. ä»“åº“é…ç½®

```yaml
repositories:
  "5.10-hulk":
    path: "/absolute/path/to/kernel-5.10"
    branch: "hulk-5.10"
    description: "æè¿°ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰"
```

#### 2. åŒ¹é…ç­–ç•¥

```yaml
matching:
  # Subjectç›¸ä¼¼åº¦é˜ˆå€¼ (0-1)
  # è¶Šé«˜è¶Šä¸¥æ ¼ï¼Œå»ºè®®0.80-0.90
  subject_similarity_threshold: 0.85
  
  # Diffç›¸ä¼¼åº¦é˜ˆå€¼ (0-1)
  # ä»£ç çº§åŒ¹é…ï¼Œå»ºè®®0.65-0.75
  diff_similarity_threshold: 0.70
  
  # æ–‡ä»¶ç›¸ä¼¼åº¦é˜ˆå€¼ (0-1)
  # ç”¨äºå¿«é€Ÿè¿‡æ»¤ï¼Œå»ºè®®0.30-0.50
  file_similarity_threshold: 0.30
  
  # è¿”å›çš„æœ€å¤§å€™é€‰æ•°
  max_candidates: 5
  
  # è‡ªåŠ¨æ¥å—çš„ç½®ä¿¡åº¦é˜ˆå€¼
  # è¶…è¿‡æ­¤å€¼è®¤ä¸ºåŒ¹é…å¯é ï¼Œæ— éœ€äººå·¥ç¡®è®¤
  auto_accept_threshold: 0.95
```

**è°ƒä¼˜å»ºè®®**:
- å¦‚æœæ¼æŠ¥å¤ªå¤šï¼ˆåº”è¯¥åŒ¹é…çš„æ²¡åŒ¹é…åˆ°ï¼‰â†’ é™ä½é˜ˆå€¼
- å¦‚æœè¯¯æŠ¥å¤ªå¤šï¼ˆåŒ¹é…ç»“æœä¸å‡†ç¡®ï¼‰â†’ æé«˜é˜ˆå€¼
- å»ºè®®å…ˆç”¨é»˜è®¤å€¼ï¼Œæ ¹æ®å®é™…æ•ˆæœè°ƒæ•´

#### 3. ä¾èµ–åˆ†æ

```yaml
dependency:
  # ä¾èµ–å¼ºåº¦é˜ˆå€¼
  # åªæœ‰è¶…è¿‡æ­¤å€¼æ‰è®¤ä¸ºå­˜åœ¨ä¾èµ–å…³ç³»
  dependency_threshold: 0.30
  
  # å¼ºä¾èµ–é˜ˆå€¼
  # è¶…è¿‡æ­¤å€¼è®¤ä¸ºæ˜¯å¼ºä¾èµ–ï¼Œå¿…é¡»ä¼˜å…ˆåˆå…¥
  strong_dependency_threshold: 0.60
  
  # æœ€å¤§å›æº¯æ—¶é—´çª—å£ï¼ˆå¤©ï¼‰
  # åªåœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…æŸ¥æ‰¾ä¾èµ–
  max_time_window_days: 180
```

#### 4. æ€§èƒ½ä¼˜åŒ–

```yaml
performance:
  # å¹¶è¡Œå¤„ç†çº¿ç¨‹æ•°
  # æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼Œå»ºè®®2-8
  max_workers: 4
  
  # æœç´¢è¶…æ—¶ï¼ˆç§’ï¼‰
  search_timeout: 300
  
  # Gitå‘½ä»¤è¶…æ—¶ï¼ˆç§’ï¼‰
  git_timeout: 60
  
  # ä½¿ç”¨Bloom FilteråŠ é€Ÿ
  # å¯¹è¶…å¤§ä»“åº“æœ‰æ•ˆï¼Œä½†éœ€è¦é¢å¤–å†…å­˜
  use_bloom_filter: true
```

---

## ğŸ“Š æ€§èƒ½åŸºå‡†

æµ‹è¯•ç¯å¢ƒ:
- CPU: Intel i7-10700K
- RAM: 32GB
- SSD: NVMe
- Kernelä»“åº“: ~10ä¸‡ä¸ªcommits

| æ“ä½œ | é¦–æ¬¡ï¼ˆæ— ç¼“å­˜ï¼‰ | åç»­ï¼ˆæœ‰ç¼“å­˜ï¼‰ | æå‡å€æ•° |
|------|--------------|--------------|---------|
| åˆ†æå•ä¸ªCVE | 45-60ç§’ | 8-15ç§’ | **3-5x** |
| æœç´¢commit (å…³é”®è¯) | 35ç§’ | 0.3ç§’ | **116x** |
| æœç´¢commit (æ–‡ä»¶) | 20ç§’ | 0.5ç§’ | **40x** |
| æ‰¹é‡åˆ†æ10ä¸ªCVE | 480ç§’ | 120ç§’ | **4x** |

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ç¼“å­˜æ„å»ºå¤±è´¥ï¼Ÿ

**ç°è±¡**: `build-cache` å‘½ä»¤æ‰§è¡Œå‡ºé”™

**å¯èƒ½åŸå› **:
1. Gitä»“åº“è·¯å¾„é…ç½®é”™è¯¯
2. ä»“åº“æŸåæˆ–ä¸æ˜¯æœ‰æ•ˆçš„gitä»“åº“
3. ç£ç›˜ç©ºé—´ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ä»“åº“è·¯å¾„
ls -la /path/to/your/kernel

# æ£€æŸ¥æ˜¯å¦æ˜¯gitä»“åº“
cd /path/to/your/kernel
git status

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ¸…ç†æ—§ç¼“å­˜é‡è¯•
rm commit_cache.db
python cli.py build-cache --target 5.10-hulk
```

---

### Q2: åŒ¹é…å‡†ç¡®ç‡ä½ï¼Ÿ

**ç°è±¡**: æ‰¾ä¸åˆ°åº”è¯¥å­˜åœ¨çš„commitï¼Œæˆ–è€…åŒ¹é…ç»“æœä¸å¯¹

**å¯èƒ½åŸå› **:
1. ç›®æ ‡ä»“åº“çš„commit msgå˜åŒ–å¾ˆå¤§
2. ä»£ç è¢«å¤§è§„æ¨¡é‡æ„
3. é˜ˆå€¼è®¾ç½®è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**:
```yaml
# 1. é™ä½åŒ¹é…é˜ˆå€¼
matching:
  subject_similarity_threshold: 0.75  # ä»0.85é™åˆ°0.75
  diff_similarity_threshold: 0.65     # ä»0.70é™åˆ°0.65

# 2. å¢åŠ å€™é€‰æ•°é‡
  max_candidates: 10  # ä»5å¢åŠ åˆ°10
```

ç„¶åæŸ¥çœ‹æ›´å¤šå€™é€‰ç»“æœï¼Œå¯èƒ½æ­£ç¡®åŒ¹é…åœ¨åé¢ã€‚

---

### Q3: åˆ†æé€Ÿåº¦æ…¢ï¼Ÿ

**å¯èƒ½åŸå› **:
1. æ²¡æœ‰æ„å»ºç¼“å­˜
2. ä»“åº“å¤ªå¤§
3. å¹¶è¡Œåº¦ä¸å¤Ÿ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. ç¡®ä¿å·²æ„å»ºç¼“å­˜
python cli.py build-cache --target 5.10-hulk

# 2. è°ƒæ•´å¹¶è¡Œåº¦
# ç¼–è¾‘ config.yaml
performance:
  max_workers: 8  # æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´

# 3. ç¦ç”¨AIåˆ†æï¼ˆå¦‚æœä¸éœ€è¦ï¼‰
python cli.py analyze --cve CVE-2024-12345 --target 5.10-hulk --no-ai
```

---

### Q4: ä¾èµ–åˆ†æå‡ºç°ç¯ï¼Ÿ

**ç°è±¡**: æ—¥å¿—ä¸­å‡ºç°"æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–"è­¦å‘Š

**åŸå› **: commitçš„æ—¶é—´æˆ³ä¸å‡†ç¡®ï¼Œæˆ–ä¾èµ–å…³ç³»è¯¯åˆ¤

**è§£å†³æ–¹æ¡ˆ**:
```python
# è¿™é€šå¸¸ä¸å½±å“æœ€ç»ˆç»“æœ
# ç³»ç»Ÿä¼šä½¿ç”¨å¯å‘å¼æ–¹æ³•æ‰“ç ´ç¯
# ä½†å»ºè®®äººå·¥ç¡®è®¤è¿™äº›commitsçš„å®é™…ä¾èµ–å…³ç³»

# æŸ¥çœ‹å‘Šè­¦ä¸­çš„commitsï¼Œæ‰‹åŠ¨ç¡®è®¤ä¾èµ–é¡ºåº
```

---

### Q5: å¦‚ä½•å¤„ç†squashçš„commitsï¼Ÿ

**åœºæ™¯**: ç¤¾åŒºå¤šä¸ªcommitsåœ¨å›åˆæ—¶è¢«åˆå¹¶æˆä¸€ä¸ª

**è¯†åˆ«æ–¹æ³•**: å¦‚æœå¤šä¸ªç¤¾åŒºcommitséƒ½æ‰¾ä¸åˆ°ï¼Œä½†å®ƒä»¬çš„ä¿®æ”¹æ–‡ä»¶é«˜åº¦é‡å ï¼Œå¯èƒ½è¢«squashäº†

**è§£å†³æ–¹æ¡ˆ**:
```python
# ä½¿ç”¨æ–‡ä»¶çº§æœç´¢
git_manager.search_commits_by_files(
    [æ‰€æœ‰ç¤¾åŒºcommitsä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨],
    target_version
)

# æŸ¥æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªcommitä¿®æ”¹äº†æ‰€æœ‰è¿™äº›æ–‡ä»¶
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šbugæˆ–æå‡ºå»ºè®®ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone <repository_url>
cd cve_backporting

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install pytest black flake8 mypy

# è¿è¡Œæµ‹è¯•
pytest tests/

# ä»£ç æ ¼å¼åŒ–
black .

# ä»£ç æ£€æŸ¥
flake8 .
mypy .
```

### æäº¤è§„èŒƒ

- ä½¿ç”¨æœ‰æ„ä¹‰çš„commit message
- æ·»åŠ å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

---

## ğŸ“ è®¸å¯è¯

[æ ¹æ®ä½ çš„éœ€è¦æ·»åŠ è®¸å¯è¯]

---

## ğŸ‘¥ ä½œè€…ä¸è‡´è°¢

- ä½œè€…: [ä½ çš„åå­—]
- è´¡çŒ®è€…: [åˆ—å‡ºè´¡çŒ®è€…]

---

## ğŸ“§ è”ç³»æ–¹å¼

- Email: your.email@example.com
- Issues: [é¡¹ç›®Issueé¡µé¢]

---

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] Web UIç•Œé¢
- [ ] æœºå™¨å­¦ä¹ å¢å¼ºåŒ¹é…
- [ ] è‡ªåŠ¨å›åˆè„šæœ¬ç”Ÿæˆ
- [ ] ä¸CI/CDé›†æˆ
- [ ] æ¼æ´æ•°æ®åº“è‡ªåŠ¨åŒæ­¥
- [ ] ä¾èµ–å›¾å¯è§†åŒ–
- [ ] æ”¯æŒæ›´å¤šLinuxå‘è¡Œç‰ˆ
